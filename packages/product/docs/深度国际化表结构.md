# ÂïÜÂìÅÈ¢ÜÂüüÊ∑±Â∫¶ÂõΩÈôÖÂåñË°®ÁªìÊûÑËÆæËÆ°ÊñπÊ°à

> Âü∫‰∫é Shopify„ÄÅMagento„ÄÅAmazon Á≠âÂõΩÈôÖÁîµÂïÜÂπ≥Âè∞ÁöÑËÆæËÆ°ÁêÜÂøµ

## ËÆæËÆ°ÁêÜÂøµ

### Ê†∏ÂøÉÂéüÂàô

```
üåç Â§öÂ∏ÇÂú∫ÊîØÊåÅ    - ‰∏çÂêåÂõΩÂÆ∂/Âú∞Âå∫Áã¨Á´ãËøêËê•
üåê Â§öËØ≠Ë®ÄÂÜÖÂÆπ    - ÂÆåÊï¥ÁöÑÁøªËØë‰ΩìÁ≥ª
üí∞ Â§öË¥ßÂ∏ÅÂÆö‰ª∑    - Âú∞Âå∫ÂåñÂÆö‰ª∑Á≠ñÁï•
üì¶ Êú¨Âú∞ÂåñÁâ©ÊµÅ    - Âú∞Âå∫Áâ©ÊµÅËßÑÂàô
üí≥ Êú¨Âú∞ÂåñÊîØ‰ªò    - Âú∞Âå∫ÊîØ‰ªòÊñπÂºè
üèõÔ∏è Á®éÂä°ÂêàËßÑ     - ÂêÑÂõΩÁ®éÊî∂ÊîøÁ≠ñ
üéØ Âú∞Âå∫ÈôêÂà∂     - ÈîÄÂîÆÂå∫ÂüüÊéßÂà∂
üìä EAVÁÅµÊ¥ªÂ±ûÊÄß   - Âä®ÊÄÅÂ±ûÊÄßÁ≥ªÁªü
```

## ‰∏Ä„ÄÅÊ†∏ÂøÉË°®ÁªìÊûÑ

### 1.1 ÂïÜÂìÅ‰∏ªË°®ÔºàProductsÔºâ

```sql
CREATE TABLE products (
    -- ============ ‰∏ªÈîÆ ============
    id BIGINT UNSIGNED PRIMARY KEY COMMENT 'Global Product ID',
    uuid CHAR(36) UNIQUE NOT NULL COMMENT 'Global UUID for API',
    
    -- ============ ÁßüÊà∑/ÊâÄÊúâËÄÖ ============
    tenant_id BIGINT UNSIGNED NOT NULL COMMENT 'Multi-tenant ID',
    owner_type VARCHAR(64) NOT NULL COMMENT 'Owner polymorphic type',
    owner_id VARCHAR(64) NOT NULL COMMENT 'Owner polymorphic ID',
    
    -- ============ ÂÖ®ÁêÉÂîØ‰∏ÄÊ†áËØÜ ============
    global_sku VARCHAR(100) UNIQUE COMMENT 'Global SKU across all markets',
    handle VARCHAR(255) UNIQUE NOT NULL COMMENT 'URL-friendly identifier',
    gtin VARCHAR(14) UNIQUE COMMENT 'Global Trade Item Number (GTIN-14)',
    
    -- ============ ÂïÜÂìÅÁ±ªÂûã ============
    product_type VARCHAR(64) NOT NULL COMMENT 'physical, digital, service, bundle',
    template_suffix VARCHAR(64) COMMENT 'Theme template to use',
    
    -- ============ ÂàÜÁ±ªÔºàÂÖ®Â±ÄÔºâ============
    primary_category_id BIGINT UNSIGNED COMMENT 'Primary global category',
    brand_id BIGINT UNSIGNED COMMENT 'Brand ID',
    vendor_id BIGINT UNSIGNED COMMENT 'Vendor/Supplier ID',
    manufacturer_id BIGINT UNSIGNED COMMENT 'Manufacturer ID',
    
    -- ============ Âèò‰ΩìÈÖçÁΩÆ ============
    has_variants BOOLEAN DEFAULT false COMMENT 'Has multiple variants',
    variant_options JSON COMMENT 'Variant option structure',
    /* Á§∫‰æã:
    {
        "options": [
            {"name": "Color", "position": 1},
            {"name": "Size", "position": 2}
        ]
    }
    */
    
    -- ============ ÂÖ®ÁêÉÂü∫Á°ÄÂ±ûÊÄß ============
    is_taxable BOOLEAN DEFAULT true COMMENT 'Subject to taxes',
    requires_shipping BOOLEAN DEFAULT true COMMENT 'Requires shipping',
    is_physical BOOLEAN DEFAULT true COMMENT 'Is physical product',
    is_downloadable BOOLEAN DEFAULT false COMMENT 'Has downloadable content',
    is_customizable BOOLEAN DEFAULT false COMMENT 'Supports customization',
    
    -- ============ Âπ¥ÈæÑÈôêÂà∂ ============
    age_restricted BOOLEAN DEFAULT false COMMENT 'Age verification required',
    minimum_age TINYINT UNSIGNED COMMENT 'Minimum age requirement',
    
    -- ============ ÂêàËßÑÊÄß ============
    requires_license BOOLEAN DEFAULT false COMMENT 'License required for purchase',
    hazmat BOOLEAN DEFAULT false COMMENT 'Hazardous materials',
    prescription_required BOOLEAN DEFAULT false COMMENT 'Prescription required',
    
    -- ============ ÂÖ®ÁêÉÂ∫ìÂ≠òÁ≠ñÁï• ============
    track_inventory BOOLEAN DEFAULT true COMMENT 'Enable inventory tracking',
    inventory_policy VARCHAR(32) DEFAULT 'deny' COMMENT 'deny|continue|backorder',
    backorder_allowed BOOLEAN DEFAULT false COMMENT 'Allow backorders',
    
    -- ============ ÂÖ®ÁêÉSEO ============
    default_locale VARCHAR(10) DEFAULT 'en-US' COMMENT 'Default language',
    
    -- ============ Áä∂ÊÄÅÁÆ°ÁêÜ ============
    status VARCHAR(32) DEFAULT 'draft' COMMENT 'draft|active|archived',
    published_scope VARCHAR(32) DEFAULT 'global' COMMENT 'global|web|pos',
    
    -- ============ ÂÆ°ËÆ°Â≠óÊÆµ ============
    created_by_type VARCHAR(64),
    created_by_id VARCHAR(64),
    updated_by_type VARCHAR(64),
    updated_by_id VARCHAR(64),
    version BIGINT UNSIGNED DEFAULT 0 COMMENT 'Optimistic locking',
    
    -- ============ Êó∂Èó¥Êà≥ÔºàUTCÔºâ============
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL,
    
    -- ============ Á¥¢Âºï ============
    INDEX idx_tenant (tenant_id),
    INDEX idx_owner (owner_type, owner_id),
    INDEX idx_handle (handle),
    INDEX idx_gtin (gtin),
    INDEX idx_status (status),
    INDEX idx_category (primary_category_id),
    INDEX idx_brand (brand_id),
    FULLTEXT idx_search (global_sku)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Global products master table';
```

### 1.2 ÂïÜÂìÅÂèò‰ΩìË°®ÔºàProduct VariantsÔºâ

```sql
CREATE TABLE product_variants (
    -- ============ ‰∏ªÈîÆ ============
    id BIGINT UNSIGNED PRIMARY KEY,
    uuid CHAR(36) UNIQUE NOT NULL,
    product_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ ÁßüÊà∑ ============
    tenant_id BIGINT UNSIGNED NOT NULL,
    owner_type VARCHAR(64) NOT NULL,
    owner_id VARCHAR(64) NOT NULL,
    
    -- ============ ÂÖ®ÁêÉÊ†áËØÜ ============
    sku VARCHAR(100) UNIQUE NOT NULL COMMENT 'Global SKU',
    barcode VARCHAR(64) COMMENT 'UPC/EAN/ISBN',
    barcode_type VARCHAR(32) COMMENT 'UPC|EAN13|EAN8|ISBN|JAN|ITF',
    
    -- ============ ÈÄâÈ°πÂÄºÔºàÊúÄÂ§ö3‰∏™Ôºâ============
    option1_value VARCHAR(255) COMMENT 'Option 1 value ID',
    option2_value VARCHAR(255) COMMENT 'Option 2 value ID',
    option3_value VARCHAR(255) COMMENT 'Option 3 value ID',
    
    -- ============ ÂÖ®ÁêÉÂü∫Á°Ä‰ª∑Ê†ºÔºàÂü∫ÂáÜË¥ßÂ∏ÅÔºâ============
    base_currency CHAR(3) DEFAULT 'USD' COMMENT 'Base currency for calculations',
    base_price DECIMAL(12,2) NOT NULL COMMENT 'Base price in base currency',
    base_cost DECIMAL(12,2) COMMENT 'Base cost in base currency',
    base_compare_at_price DECIMAL(12,2) COMMENT 'Base MSRP',
    
    -- ============ ÂÖ®ÁêÉÂ∫ìÂ≠òÔºàÊ±áÊÄªÔºâ============
    global_inventory_quantity BIGINT DEFAULT 0 COMMENT 'Total across all warehouses',
    allocated_quantity BIGINT DEFAULT 0 COMMENT 'Reserved/allocated',
    available_quantity BIGINT DEFAULT 0 COMMENT 'Available for sale',
    
    -- ============ Áâ©ÁêÜÂ±ûÊÄßÔºàSIÊ†áÂáÜÂçï‰ΩçÔºâ============
    weight DECIMAL(10,3) COMMENT 'Weight in kg',
    length DECIMAL(8,2) COMMENT 'Length in meters',
    width DECIMAL(8,2) COMMENT 'Width in meters',
    height DECIMAL(8,2) COMMENT 'Height in meters',
    volume DECIMAL(10,4) COMMENT 'Volume in cubic meters',
    
    -- ============ ÂåÖË£Ö‰ø°ÊÅØ ============
    package_weight DECIMAL(10,3) COMMENT 'Weight with packaging (kg)',
    package_length DECIMAL(8,2) COMMENT 'Package length (m)',
    package_width DECIMAL(8,2) COMMENT 'Package width (m)',
    package_height DECIMAL(8,2) COMMENT 'Package height (m)',
    
    -- ============ Áâ©ÊµÅÂ±ûÊÄß ============
    requires_shipping BOOLEAN DEFAULT true,
    taxable BOOLEAN DEFAULT true,
    fulfillment_service VARCHAR(64) DEFAULT 'manual' COMMENT 'Fulfillment service',
    
    -- ============ ÂõΩÈôÖË¥∏Êòì ============
    origin_country CHAR(2) COMMENT 'ISO 3166-1 alpha-2',
    hs_code VARCHAR(16) COMMENT 'Harmonized System code',
    
    -- ============ Â™í‰Ωì ============
    image_id BIGINT UNSIGNED COMMENT 'Primary image',
    position TINYINT UNSIGNED DEFAULT 1 COMMENT 'Display order',
    
    -- ============ Áä∂ÊÄÅ ============
    status VARCHAR(32) DEFAULT 'active',
    
    -- ============ ÂÆ°ËÆ° ============
    created_by_type VARCHAR(64),
    created_by_id VARCHAR(64),
    updated_by_type VARCHAR(64),
    updated_by_id VARCHAR(64),
    version BIGINT UNSIGNED DEFAULT 0,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL,
    
    -- ============ Á¥¢Âºï ============
    INDEX idx_product (product_id),
    INDEX idx_tenant (tenant_id),
    INDEX idx_sku (sku),
    INDEX idx_barcode (barcode),
    INDEX idx_status (status),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Global product variants';
```

## ‰∫å„ÄÅÂ§öËØ≠Ë®ÄÁøªËØë‰ΩìÁ≥ª

### 2.1 ÂïÜÂìÅÁøªËØëË°®

```sql
CREATE TABLE product_translations (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    locale VARCHAR(10) NOT NULL COMMENT 'en-US, zh-CN, ja-JP',
    
    -- ============ Âü∫Á°ÄÂÜÖÂÆπ ============
    title VARCHAR(500) NOT NULL COMMENT 'Product title',
    subtitle VARCHAR(500) COMMENT 'Product subtitle/tagline',
    description TEXT COMMENT 'Product description',
    description_html TEXT COMMENT 'Rich HTML description',
    
    -- ============ SEO ============
    meta_title VARCHAR(255),
    meta_description TEXT,
    meta_keywords JSON COMMENT 'Keywords array',
    
    -- ============ Ëê•ÈîÄÂÜÖÂÆπ ============
    marketing_description TEXT COMMENT 'Marketing copy',
    highlights JSON COMMENT 'Key features array',
    specifications JSON COMMENT 'Technical specs',
    
    -- ============ Ê≥ïÂæãÂêàËßÑ ============
    legal_disclaimer TEXT COMMENT 'Legal disclaimer',
    warning_label TEXT COMMENT 'Warning labels',
    care_instructions TEXT COMMENT 'Care instructions',
    
    -- ============ Áä∂ÊÄÅ ============
    is_published BOOLEAN DEFAULT false,
    published_at TIMESTAMP NULL,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_locale (product_id, locale),
    INDEX idx_locale (locale),
    FULLTEXT idx_search (title, description),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Product multi-language translations';
```

### 2.2 Âèò‰ΩìÁøªËØëË°®

```sql
CREATE TABLE variant_translations (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    variant_id BIGINT UNSIGNED NOT NULL,
    locale VARCHAR(10) NOT NULL,
    
    title VARCHAR(255) COMMENT 'Variant display title',
    option1_name VARCHAR(100) COMMENT 'Translated option 1 value',
    option2_name VARCHAR(100) COMMENT 'Translated option 2 value',
    option3_name VARCHAR(100) COMMENT 'Translated option 3 value',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_variant_locale (variant_id, locale),
    
    FOREIGN KEY (variant_id) REFERENCES product_variants(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 2.3 ÈÄâÈ°πÁøªËØëË°®

```sql
CREATE TABLE product_option_translations (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    locale VARCHAR(10) NOT NULL,
    
    options JSON NOT NULL COMMENT 'Translated option structure',
    /* Á§∫‰æã:
    {
        "options": [
            {
                "name": "È¢úËâ≤",
                "position": 1,
                "values": [
                    {"value_id": "red", "display": "Á∫¢Ëâ≤"},
                    {"value_id": "blue", "display": "ËìùËâ≤"}
                ]
            }
        ]
    }
    */
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_locale (product_id, locale),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

## ‰∏â„ÄÅÂ§öÂ∏ÇÂú∫ÂÆö‰ª∑‰ΩìÁ≥ª

### 3.1 Â∏ÇÂú∫ÂÆö‰πâË°®

```sql
CREATE TABLE markets (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    code VARCHAR(32) UNIQUE NOT NULL COMMENT 'Market code: US, CN, EU-DE',
    name VARCHAR(100) NOT NULL,
    
    -- ============ Âú∞ÁêÜËåÉÂõ¥ ============
    type VARCHAR(32) NOT NULL COMMENT 'country|region|global',
    countries JSON COMMENT 'ISO country codes array',
    regions JSON COMMENT 'Sub-regions/states',
    
    -- ============ Ë¥ßÂ∏ÅÈÖçÁΩÆ ============
    primary_currency CHAR(3) NOT NULL COMMENT 'Primary currency',
    supported_currencies JSON COMMENT 'Additional currencies',
    
    -- ============ ËØ≠Ë®ÄÈÖçÁΩÆ ============
    primary_locale VARCHAR(10) NOT NULL COMMENT 'Primary language',
    supported_locales JSON COMMENT 'Additional languages',
    
    -- ============ Êó∂Âå∫ ============
    timezone VARCHAR(64) COMMENT 'Market timezone',
    
    -- ============ Á®éÂä°ÈÖçÁΩÆ ============
    tax_inclusive_pricing BOOLEAN DEFAULT false COMMENT 'Prices include tax',
    tax_name VARCHAR(100) COMMENT 'Tax display name: VAT, GST, Sales Tax',
    default_tax_rate DECIMAL(5,4) COMMENT 'Default tax rate',
    
    -- ============ ËøêËê•ÈÖçÁΩÆ ============
    is_active BOOLEAN DEFAULT true,
    priority INTEGER DEFAULT 0 COMMENT 'Market priority',
    
    -- ============ ÂÖÉÊï∞ÊçÆ ============
    metadata JSON COMMENT 'Additional market config',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_active (is_active),
    INDEX idx_priority (priority)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Global markets definition';

-- ÊèíÂÖ•Á§∫‰æãÊï∞ÊçÆ
INSERT INTO markets (code, name, type, countries, primary_currency, primary_locale, tax_inclusive_pricing) VALUES
('US', 'United States', 'country', '["US"]', 'USD', 'en-US', false),
('CN', 'China', 'country', '["CN"]', 'CNY', 'zh-CN', true),
('EU-DE', 'Germany (EU)', 'country', '["DE"]', 'EUR', 'de-DE', true),
('EU-FR', 'France (EU)', 'country', '["FR"]', 'EUR', 'fr-FR', true),
('UK', 'United Kingdom', 'country', '["GB"]', 'GBP', 'en-GB', true),
('JP', 'Japan', 'country', '["JP"]', 'JPY', 'ja-JP', true),
('APAC', 'Asia Pacific', 'region', '["SG", "MY", "TH", "VN"]', 'USD', 'en-US', false);
```

### 3.2 Â∏ÇÂú∫ÂèØÁî®ÊÄßË°®

```sql
CREATE TABLE product_market_availability (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ ÂèØÁî®ÊÄßÊéßÂà∂ ============
    is_available BOOLEAN DEFAULT true COMMENT 'Available in this market',
    available_from TIMESTAMP NULL COMMENT 'Available from date',
    available_until TIMESTAMP NULL COMMENT 'Available until date',
    
    -- ============ ÈîÄÂîÆÊ∏†ÈÅì ============
    sales_channels JSON COMMENT 'online, pos, marketplace, social',
    
    -- ============ ÈôêÂà∂ÂéüÂõ† ============
    restriction_reason VARCHAR(255) COMMENT 'Why restricted if not available',
    
    -- ============ ‰ºòÂÖàÁ∫ß ============
    priority INTEGER DEFAULT 0 COMMENT 'Display priority in market',
    
    -- ============ ÂÖÉÊï∞ÊçÆ ============
    metadata JSON COMMENT 'Market-specific config',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_market (product_id, market_id),
    INDEX idx_market (market_id),
    INDEX idx_available (is_available),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (market_id) REFERENCES markets(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Product availability by market';
```

### 3.3 Â∏ÇÂú∫ÂÆö‰ª∑Ë°®

```sql
CREATE TABLE variant_market_prices (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    variant_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ ‰ª∑Ê†ºÈÖçÁΩÆ ============
    currency CHAR(3) NOT NULL COMMENT 'ISO 4217',
    price DECIMAL(12,2) NOT NULL COMMENT 'Selling price',
    compare_at_price DECIMAL(12,2) COMMENT 'Original/MSRP price',
    cost_price DECIMAL(12,2) COMMENT 'Cost for margin calculation',
    
    -- ============ ÂÆö‰ª∑Á≠ñÁï• ============
    pricing_type VARCHAR(32) DEFAULT 'fixed' COMMENT 'fixed|dynamic|tiered',
    price_calculation_rule JSON COMMENT 'Auto-pricing rules',
    /* Á§∫‰æã:
    {
        "method": "exchange_rate",
        "base_currency": "USD",
        "markup_percentage": 5.0,
        "round_to": 0.99
    }
    */
    
    -- ============ ‰ª∑Ê†ºÂ±ÇÁ∫ßÔºàÂÆ¢Êà∑Áæ§‰ΩìÔºâ============
    customer_group VARCHAR(64) COMMENT 'retail|wholesale|vip|member',
    min_quantity INTEGER COMMENT 'Minimum quantity for this price',
    
    -- ============ ÊúâÊïàÊúü ============
    effective_from TIMESTAMP NULL COMMENT 'Price effective from',
    effective_until TIMESTAMP NULL COMMENT 'Price effective until',
    
    -- ============ Á®éÂä° ============
    tax_inclusive BOOLEAN COMMENT 'Override market default',
    tax_code VARCHAR(64) COMMENT 'Tax category code',
    
    -- ============ Áä∂ÊÄÅ ============
    is_active BOOLEAN DEFAULT true,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_variant_market (variant_id, market_id),
    INDEX idx_market (market_id),
    INDEX idx_currency (currency),
    INDEX idx_active (is_active, effective_from, effective_until),
    
    FOREIGN KEY (variant_id) REFERENCES product_variants(id) ON DELETE CASCADE,
    FOREIGN KEY (market_id) REFERENCES markets(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Market-specific pricing for variants';
```

### 3.4 Ê±áÁéáË°®

```sql
CREATE TABLE exchange_rates (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    from_currency CHAR(3) NOT NULL,
    to_currency CHAR(3) NOT NULL,
    rate DECIMAL(18,8) NOT NULL COMMENT 'Exchange rate with high precision',
    
    -- ============ Êù•Ê∫ê ============
    source VARCHAR(64) COMMENT 'Rate source: manual, api, central_bank',
    
    -- ============ ÊúâÊïàÊúü ============
    effective_from TIMESTAMP NOT NULL,
    effective_until TIMESTAMP NULL,
    
    -- ============ Áä∂ÊÄÅ ============
    is_active BOOLEAN DEFAULT true,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_currencies_date (from_currency, to_currency, effective_from),
    INDEX idx_active (is_active, effective_from),
    INDEX idx_from (from_currency),
    INDEX idx_to (to_currency)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Exchange rates for multi-currency pricing';
```

## Âõõ„ÄÅÂÖ®ÁêÉÂ∫ìÂ≠òÁÆ°ÁêÜ

### 4.1 ‰ªìÂ∫ì/Â∫ì‰ΩçË°®

```sql
CREATE TABLE warehouses (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    code VARCHAR(32) UNIQUE NOT NULL COMMENT 'Warehouse code',
    name VARCHAR(255) NOT NULL,
    
    -- ============ ‰ΩçÁΩÆ‰ø°ÊÅØ ============
    country CHAR(2) NOT NULL COMMENT 'ISO 3166-1',
    region VARCHAR(100) COMMENT 'State/Province',
    city VARCHAR(100),
    postal_code VARCHAR(20),
    address TEXT,
    latitude DECIMAL(10,8),
    longitude DECIMAL(11,8),
    timezone VARCHAR(64),
    
    -- ============ ‰ªìÂ∫ìÁ±ªÂûã ============
    warehouse_type VARCHAR(32) COMMENT 'distribution|fulfillment|dropship|store',
    
    -- ============ ÊúçÂä°Â∏ÇÂú∫ ============
    serving_markets JSON COMMENT 'Market codes this warehouse serves',
    
    -- ============ ËøêËê•ÈÖçÁΩÆ ============
    is_active BOOLEAN DEFAULT true,
    priority INTEGER DEFAULT 0 COMMENT 'Fulfillment priority',
    
    -- ============ ËÅîÁ≥ªÊñπÂºè ============
    contact_name VARCHAR(255),
    contact_phone VARCHAR(50),
    contact_email VARCHAR(255),
    
    -- ============ ÂÖÉÊï∞ÊçÆ ============
    metadata JSON,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_country (country),
    INDEX idx_active (is_active),
    INDEX idx_priority (priority)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Global warehouses and fulfillment centers';
```

### 4.2 Â∫ìÂ≠òÈ°πË°®

```sql
CREATE TABLE inventory_items (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    variant_id BIGINT UNSIGNED NOT NULL,
    warehouse_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ Â∫ìÂ≠òÊï∞Èáè ============
    quantity_on_hand BIGINT DEFAULT 0 COMMENT 'Physical stock',
    quantity_available BIGINT DEFAULT 0 COMMENT 'Available for sale',
    quantity_reserved BIGINT DEFAULT 0 COMMENT 'Reserved/allocated',
    quantity_incoming BIGINT DEFAULT 0 COMMENT 'On order',
    quantity_damaged BIGINT DEFAULT 0 COMMENT 'Damaged/defective',
    
    -- ============ Â∫ìÂ≠òÁ≠ñÁï• ============
    safety_stock INTEGER DEFAULT 0 COMMENT 'Safety stock level',
    reorder_point INTEGER DEFAULT 0 COMMENT 'Reorder trigger',
    reorder_quantity INTEGER DEFAULT 0 COMMENT 'Reorder amount',
    
    -- ============ ‰ΩçÁΩÆ‰ø°ÊÅØ ============
    bin_location VARCHAR(100) COMMENT 'Bin/shelf location',
    
    -- ============ Áä∂ÊÄÅ ============
    is_tracked BOOLEAN DEFAULT true COMMENT 'Track inventory for this item',
    
    -- ============ Êó∂Èó¥Êà≥ ============
    last_counted_at TIMESTAMP NULL COMMENT 'Last physical count',
    last_restocked_at TIMESTAMP NULL COMMENT 'Last restock',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_variant_warehouse (variant_id, warehouse_id),
    INDEX idx_warehouse (warehouse_id),
    INDEX idx_available (quantity_available),
    
    FOREIGN KEY (variant_id) REFERENCES product_variants(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Inventory levels by warehouse';
```

### 4.3 Â∫ìÂ≠òÂéÜÂè≤Ë°®

```sql
CREATE TABLE inventory_history (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    inventory_item_id BIGINT UNSIGNED NOT NULL,
    variant_id BIGINT UNSIGNED NOT NULL,
    warehouse_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ ÂèòÊõ¥Á±ªÂûã ============
    transaction_type VARCHAR(32) NOT NULL COMMENT 'purchase|sale|adjustment|transfer|return',
    
    -- ============ Êï∞ÈáèÂèòÂåñ ============
    quantity_change BIGINT NOT NULL COMMENT 'Positive or negative',
    quantity_before BIGINT NOT NULL,
    quantity_after BIGINT NOT NULL,
    
    -- ============ ÂÖ≥ËÅî‰ø°ÊÅØ ============
    reference_type VARCHAR(64) COMMENT 'Order, PO, Transfer, etc',
    reference_id VARCHAR(64) COMMENT 'Related transaction ID',
    
    -- ============ ÂéüÂõ† ============
    reason VARCHAR(255) COMMENT 'Reason for adjustment',
    notes TEXT,
    
    -- ============ Êìç‰Ωú‰∫∫ ============
    created_by_type VARCHAR(64),
    created_by_id VARCHAR(64),
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_inventory_item (inventory_item_id),
    INDEX idx_variant (variant_id),
    INDEX idx_warehouse (warehouse_id),
    INDEX idx_type (transaction_type),
    INDEX idx_reference (reference_type, reference_id),
    INDEX idx_created (created_at),
    
    FOREIGN KEY (inventory_item_id) REFERENCES inventory_items(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Inventory transaction history';
```

## ‰∫î„ÄÅEAV ÁÅµÊ¥ªÂ±ûÊÄßÁ≥ªÁªü

### 5.1 Â±ûÊÄßÂÆö‰πâË°®

```sql
CREATE TABLE product_attributes (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    code VARCHAR(64) UNIQUE NOT NULL COMMENT 'Attribute code: color, size, material',
    
    -- ============ Â±ûÊÄßÁ±ªÂûã ============
    attribute_type VARCHAR(32) NOT NULL COMMENT 'text|number|boolean|select|multiselect|date',
    input_type VARCHAR(32) NOT NULL COMMENT 'text|textarea|select|checkbox|radio|date',
    
    -- ============ Êï∞ÊçÆÈ™åËØÅ ============
    validation_rules JSON COMMENT 'Validation rules',
    /* Á§∫‰æã:
    {
        "required": true,
        "min_length": 1,
        "max_length": 100,
        "pattern": "^[A-Za-z0-9]+$"
    }
    */
    
    -- ============ ‰ΩøÁî®ËåÉÂõ¥ ============
    scope VARCHAR(32) DEFAULT 'global' COMMENT 'global|market|locale',
    is_global BOOLEAN DEFAULT true COMMENT 'Same across all markets',
    is_localizable BOOLEAN DEFAULT false COMMENT 'Can be translated',
    is_configurable BOOLEAN DEFAULT false COMMENT 'Used for variants',
    
    -- ============ ÊòæÁ§∫ÈÖçÁΩÆ ============
    is_visible BOOLEAN DEFAULT true,
    is_searchable BOOLEAN DEFAULT false,
    is_filterable BOOLEAN DEFAULT false,
    is_comparable BOOLEAN DEFAULT false,
    
    -- ============ ÊéíÂ∫è ============
    position INTEGER DEFAULT 0,
    
    -- ============ ÂàÜÁªÑ ============
    attribute_group_id BIGINT UNSIGNED COMMENT 'Attribute group',
    
    -- ============ ÂÖÉÊï∞ÊçÆ ============
    metadata JSON,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_code (code),
    INDEX idx_type (attribute_type),
    INDEX idx_searchable (is_searchable),
    INDEX idx_filterable (is_filterable)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Product attribute definitions (EAV)';
```

### 5.2 Â±ûÊÄßÁøªËØëË°®

```sql
CREATE TABLE product_attribute_translations (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    attribute_id BIGINT UNSIGNED NOT NULL,
    locale VARCHAR(10) NOT NULL,
    
    label VARCHAR(255) NOT NULL COMMENT 'Display label',
    description TEXT COMMENT 'Attribute description',
    placeholder VARCHAR(255) COMMENT 'Input placeholder',
    help_text TEXT COMMENT 'Help text',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_attribute_locale (attribute_id, locale),
    
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 5.3 Â±ûÊÄßÈÄâÈ°πË°®Ôºàfor select/multiselectÔºâ

```sql
CREATE TABLE product_attribute_options (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    attribute_id BIGINT UNSIGNED NOT NULL,
    option_value VARCHAR(255) NOT NULL COMMENT 'Internal value',
    
    -- ============ ÊòæÁ§∫ÈÖçÁΩÆ ============
    position INTEGER DEFAULT 0,
    is_default BOOLEAN DEFAULT false,
    
    -- ============ È¢ùÂ§ñÂ±ûÊÄßÔºàÂ¶ÇÈ¢úËâ≤ÁöÑhexÂÄºÔºâ============
    metadata JSON,
    /* Á§∫‰æã for color:
    {
        "hex": "#FF0000",
        "swatch_image": "red-swatch.jpg"
    }
    */
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_attribute (attribute_id),
    INDEX idx_position (position),
    
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 5.4 Â±ûÊÄßÈÄâÈ°πÁøªËØëË°®

```sql
CREATE TABLE product_attribute_option_translations (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    option_id BIGINT UNSIGNED NOT NULL,
    locale VARCHAR(10) NOT NULL,
    
    label VARCHAR(255) NOT NULL COMMENT 'Display label',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_option_locale (option_id, locale),
    
    FOREIGN KEY (option_id) REFERENCES product_attribute_options(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 5.5 ÂïÜÂìÅÂ±ûÊÄßÂÄºË°®ÔºàEAV ValuesÔºâ

```sql
-- Text/Varchar ÂÄº
CREATE TABLE product_attribute_values_varchar (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    attribute_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED COMMENT 'NULL for global',
    locale VARCHAR(10) COMMENT 'NULL for non-localizable',
    
    value VARCHAR(500) NOT NULL,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_attr_market_locale (product_id, attribute_id, market_id, locale),
    INDEX idx_attribute (attribute_id),
    INDEX idx_value (value(100)),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Text ÂÄº
CREATE TABLE product_attribute_values_text (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    attribute_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED,
    locale VARCHAR(10),
    
    value TEXT NOT NULL,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_attr_market_locale (product_id, attribute_id, market_id, locale),
    INDEX idx_attribute (attribute_id),
    FULLTEXT idx_value (value),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Integer/Decimal ÂÄº
CREATE TABLE product_attribute_values_decimal (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    attribute_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED,
    
    value DECIMAL(20,4) NOT NULL,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_attr_market (product_id, attribute_id, market_id),
    INDEX idx_attribute (attribute_id),
    INDEX idx_value (value),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Datetime ÂÄº
CREATE TABLE product_attribute_values_datetime (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    attribute_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED,
    
    value DATETIME NOT NULL,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_attr_market (product_id, attribute_id, market_id),
    INDEX idx_attribute (attribute_id),
    INDEX idx_value (value),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Select/Multiselect ÂÄº
CREATE TABLE product_attribute_values_option (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    attribute_id BIGINT UNSIGNED NOT NULL,
    option_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_product_attr_market (product_id, attribute_id, market_id),
    INDEX idx_option (option_id),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (attribute_id) REFERENCES product_attributes(id) ON DELETE CASCADE,
    FOREIGN KEY (option_id) REFERENCES product_attribute_options(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

## ÂÖ≠„ÄÅÁ®éÂä°‰∏éÂêàËßÑ

### 6.1 Á®éÂä°ÂàÜÁ±ªË°®

```sql
CREATE TABLE tax_categories (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    code VARCHAR(64) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    
    -- ============ ÈªòËÆ§Á®éÁéá ============
    default_rate DECIMAL(5,4) COMMENT 'Default tax rate percentage',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 6.2 Â∏ÇÂú∫Á®éÁéáË°®

```sql
CREATE TABLE market_tax_rates (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    market_id BIGINT UNSIGNED NOT NULL,
    tax_category_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ Á®éÁéáÈÖçÁΩÆ ============
    rate DECIMAL(5,4) NOT NULL COMMENT 'Tax rate',
    compound BOOLEAN DEFAULT false COMMENT 'Compound tax',
    
    -- ============ ÈÄÇÁî®Êù°‰ª∂ ============
    region VARCHAR(100) COMMENT 'State/Province',
    city VARCHAR(100),
    postal_code_pattern VARCHAR(50) COMMENT 'Postal code pattern',
    
    -- ============ ÊúâÊïàÊúü ============
    effective_from DATE NOT NULL,
    effective_until DATE NULL,
    
    is_active BOOLEAN DEFAULT true,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_market (market_id),
    INDEX idx_category (tax_category_id),
    INDEX idx_effective (effective_from, effective_until),
    
    FOREIGN KEY (market_id) REFERENCES markets(id) ON DELETE CASCADE,
    FOREIGN KEY (tax_category_id) REFERENCES tax_categories(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Tax rates by market and category';
```

### 6.3 ‰∫ßÂìÅÁ®éÂä°ÈÖçÁΩÆË°®

```sql
CREATE TABLE product_tax_config (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    market_id BIGINT UNSIGNED COMMENT 'NULL for global',
    
    -- ============ Á®éÂä°ÂàÜÁ±ª ============
    tax_category_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ Á®éÂä°‰ª£Á†Å ============
    tax_code VARCHAR(64) COMMENT 'Product tax code',
    hs_code VARCHAR(16) COMMENT 'Harmonized System code',
    
    -- ============ Ë±ÅÂÖç ============
    is_tax_exempt BOOLEAN DEFAULT false,
    exemption_reason VARCHAR(255),
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_product_market (product_id, market_id),
    INDEX idx_market (market_id),
    INDEX idx_category (tax_category_id),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (tax_category_id) REFERENCES tax_categories(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

## ‰∏É„ÄÅÂ™í‰ΩìÁÆ°ÁêÜ

### 7.1 Â™í‰ΩìËµÑÊ∫êË°®

```sql
CREATE TABLE product_media (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ Â™í‰ΩìÁ±ªÂûã ============
    media_type VARCHAR(32) NOT NULL COMMENT 'image|video|document|3d_model',
    mime_type VARCHAR(100) NOT NULL,
    
    -- ============ Êñá‰ª∂‰ø°ÊÅØ ============
    url TEXT NOT NULL COMMENT 'CDN URL',
    file_size BIGINT COMMENT 'File size in bytes',
    file_name VARCHAR(255),
    
    -- ============ ÂõæÁâáÂ±ûÊÄß ============
    width INTEGER COMMENT 'Image width',
    height INTEGER COMMENT 'Image height',
    alt_text VARCHAR(500) COMMENT 'Alt text for accessibility',
    
    -- ============ ‰ΩçÁΩÆ ============
    position INTEGER DEFAULT 0,
    
    -- ============ Â∫îÁî®ËåÉÂõ¥ ============
    scope VARCHAR(32) DEFAULT 'global' COMMENT 'global|market|variant',
    market_id BIGINT UNSIGNED COMMENT 'Specific market',
    variant_id BIGINT UNSIGNED COMMENT 'Specific variant',
    
    -- ============ Ê†áÁ≠æ ============
    tags JSON COMMENT 'Media tags',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_product (product_id),
    INDEX idx_type (media_type),
    INDEX idx_market (market_id),
    INDEX idx_variant (variant_id),
    INDEX idx_position (position),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Product media assets';
```

### 7.2 Â™í‰ΩìÊú¨Âú∞ÂåñË°®

```sql
CREATE TABLE product_media_translations (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    media_id BIGINT UNSIGNED NOT NULL,
    locale VARCHAR(10) NOT NULL,
    
    alt_text VARCHAR(500),
    title VARCHAR(255),
    description TEXT,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY idx_media_locale (media_id, locale),
    
    FOREIGN KEY (media_id) REFERENCES product_media(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

## ÂÖ´„ÄÅÁâ©ÊµÅ‰∏éÈÖçÈÄÅ

### 8.1 ËøêËæìÂå∫ÂüüË°®

```sql
CREATE TABLE shipping_zones (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    market_id BIGINT UNSIGNED NOT NULL,
    name VARCHAR(255) NOT NULL,
    
    -- ============ Ë¶ÜÁõñÂå∫Âüü ============
    countries JSON COMMENT 'Country codes',
    regions JSON COMMENT 'States/provinces',
    postal_codes JSON COMMENT 'Postal code patterns',
    
    -- ============ ÈÖçÁΩÆ ============
    is_active BOOLEAN DEFAULT true,
    priority INTEGER DEFAULT 0,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_market (market_id),
    
    FOREIGN KEY (market_id) REFERENCES markets(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 8.2 ËøêËæìÈôêÂà∂Ë°®

```sql
CREATE TABLE product_shipping_restrictions (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT UNSIGNED NOT NULL,
    
    -- ============ ÈôêÂà∂Á±ªÂûã ============
    restriction_type VARCHAR(32) NOT NULL COMMENT 'prohibited|restricted|requires_license',
    
    -- ============ ÈÄÇÁî®ËåÉÂõ¥ ============
    countries JSON COMMENT 'Restricted countries',
    regions JSON COMMENT 'Restricted regions',
    
    -- ============ ÂéüÂõ† ============
    reason TEXT,
    
    -- ============ ÁâπÊÆäË¶ÅÊ±Ç ============
    special_requirements JSON COMMENT 'Special handling requirements',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_product (product_id),
    INDEX idx_type (restriction_type),
    
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
COMMENT='Product shipping restrictions by region';
```

## ÊÄªÁªì

### ÂÖ≥ÈîÆËÆæËÆ°ÁâπÁÇπ

1. **‚úÖ Â§öÂ∏ÇÂú∫Êû∂
