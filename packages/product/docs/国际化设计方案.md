# å•†å“é¢†åŸŸå›½é™…åŒ–è®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€å›½é™…åŒ–æ ¸å¿ƒåŸåˆ™

### 1. å‚è€ƒçš„å›½é™…å¹³å°æ ‡å‡†

| å¹³å° | æ ¸å¿ƒæ¦‚å¿µ | ç‰¹ç‚¹ |
|------|---------|------|
| **Shopify** | Product + Variant | æœ€æµè¡Œçš„å›½é™…ç”µå•†SaaSå¹³å° |
| **WooCommerce** | Product + Variation | WordPressç”Ÿæ€ï¼Œå…¨çƒå¸‚åœºä»½é¢å¤§ |
| **Magento** | Product + Simple/Configurable | ä¼ä¸šçº§ç”µå•†å¹³å° |
| **BigCommerce** | Product + Variant | é¢å‘ä¸­å¤§å‹ä¼ä¸š |

### 2. å›½é™…åŒ–è®¾è®¡æ ¸å¿ƒ

```
âœ… ä½¿ç”¨å›½é™…é€šç”¨æœ¯è¯­ï¼ˆvariant > skuï¼‰
âœ… æ”¯æŒå¤šè¯­è¨€å†…å®¹
âœ… æ”¯æŒå¤šè´§å¸å®šä»·
âœ… æ ‡å‡†åŒ–åº¦é‡å•ä½ï¼ˆSIå›½é™…å•ä½åˆ¶ï¼‰
âœ… æ—¶åŒºæ— å…³çš„æ—¶é—´å­˜å‚¨
âœ… ç¬¦åˆGDPRç­‰å›½é™…æ³•è§„
âœ… SEOå‹å¥½çš„å…ƒæ•°æ®ç»“æ„
âœ… å›½é™…ç¨åŠ¡æ”¯æŒ
```

## äºŒã€è¡¨ç»“æ„å›½é™…åŒ–æ”¹é€ 

### 2.1 Product è¡¨ï¼ˆå›½é™…åŒ–ç‰ˆæœ¬ï¼‰

```php
Schema::create('products', function (Blueprint $table) {
    
    // ============ åŸºç¡€ä¿¡æ¯ ============
    $table->unsignedBigInteger('id')->primary()->comment('Product ID');
    
    // å¸‚åœº/ç§Ÿæˆ·
    $table->string('market', 32)->default('default')->comment('Market identifier');
    $table->string('owner_type', 64)->comment('Owner polymorphic type');
    $table->string('owner_id', 64)->comment('Owner polymorphic ID');
    
    // ============ æ ¸å¿ƒä¿¡æ¯ï¼ˆä½¿ç”¨å›½é™…åŒ–æœ¯è¯­ï¼‰============
    $table->string('title')->comment('Product title (base language)');
    $table->string('handle')->unique()->comment('URL-friendly unique identifier'); // Shopifyé£æ ¼
    $table->text('description')->nullable()->comment('Product description');
    $table->string('product_type', 64)->nullable()->comment('Product type/category tag'); // Shopifyé£æ ¼
    $table->string('vendor')->nullable()->comment('Brand/Vendor name'); // Shopifyé£æ ¼
    
    // ============ çŠ¶æ€ç®¡ç† ============
    $table->string('status', 32)->comment('Status: draft, active, archived');
    $table->boolean('published')->default(false)->comment('Is published');
    $table->timestamp('published_at')->nullable()->comment('Published datetime (UTC)');
    
    // ============ åˆ†ç±»ï¼ˆå›½é™…åŒ–ï¼‰============
    $table->unsignedBigInteger('category_id')->default(0)->comment('Primary category ID');
    $table->unsignedBigInteger('brand_id')->default(0)->comment('Brand ID');
    $table->unsignedBigInteger('product_group_id')->default(0)->comment('Product collection ID');
    
    // ============ SKU/SPU æ ‡è¯† ============
    $table->string('sku')->nullable()->comment('Product-level SKU (if single variant)');
    $table->string('barcode')->nullable()->comment('Product-level barcode');
    $table->string('model_number')->nullable()->comment('Manufacturer model number');
    
    // ============ è§„æ ¼ç®¡ç† ============
    $table->boolean('has_variants')->default(false)->comment('Has multiple variants');
    $table->json('options')->nullable()->comment('Variant options structure'); // Shopifyé£æ ¼
    // ç¤ºä¾‹: [{"name": "Color", "values": ["Red", "Blue"]}, {"name": "Size", "values": ["S", "M", "L"]}]
    
    // ============ å®šä»·ï¼ˆåŸºç¡€è´§å¸ï¼‰============
    $table->string('currency', 3)->default('USD')->comment('Base currency (ISO 4217)');
    $table->decimal('base_price', 12, 2)->nullable()->comment('Minimum variant price');
    $table->decimal('compare_at_price', 12, 2)->nullable()->comment('Original/MSRP price');
    
    // ============ åº“å­˜èšåˆ ============
    $table->bigInteger('total_stock')->default(0)->comment('Total inventory across variants');
    $table->boolean('track_inventory')->default(true)->comment('Enable inventory tracking');
    $table->string('inventory_policy', 32)->default('deny')->comment('deny|continue when out of stock');
    
    // ============ ç‰©æµé…ç½® ============
    $table->boolean('requires_shipping')->default(true)->comment('Is physical product');
    $table->string('fulfillment_service', 64)->default('manual')->comment('Fulfillment service');
    $table->unsignedBigInteger('freight_template_id')->nullable()->comment('Shipping template ID');
    
    // ============ é‡é‡ï¼ˆä½¿ç”¨å›½é™…æ ‡å‡†å•ä½ï¼‰============
    $table->decimal('weight', 10, 3)->nullable()->comment('Product weight');
    $table->string('weight_unit', 10)->default('kg')->comment('Weight unit: kg, g, lb, oz');
    
    // ============ ç¨åŠ¡ ============
    $table->boolean('taxable')->default(true)->comment('Subject to taxes');
    $table->string('tax_code')->nullable()->comment('Tax code/category');
    
    // ============ SEO ä¼˜åŒ–ï¼ˆå›½é™…åŒ–å¿…å¤‡ï¼‰============
    $table->string('meta_title')->nullable()->comment('SEO title');
    $table->text('meta_description')->nullable()->comment('SEO description');
    $table->json('meta_keywords')->nullable()->comment('SEO keywords array');
    
    // ============ åª’ä½“èµ„æº ============
    $table->string('featured_image')->nullable()->comment('Main product image URL');
    $table->json('images')->nullable()->comment('Additional images array');
    $table->json('videos')->nullable()->comment('Product videos array');
    
    // ============ æ ‡ç­¾ä¸åˆ†ç»„ ============
    $table->json('tags')->nullable()->comment('Product tags array'); // Shopifyé£æ ¼
    $table->json('collections')->nullable()->comment('Collection IDs array');
    
    // ============ å¯ç”¨æ€§è§„åˆ™ ============
    $table->timestamp('available_at')->nullable()->comment('Availability start (UTC)');
    $table->timestamp('expires_at')->nullable()->comment('Availability end (UTC)');
    $table->json('available_markets')->nullable()->comment('Available market codes');
    $table->json('available_channels')->nullable()->comment('Sales channels: online, pos, etc');
    
    // ============ å›½é™…åŒ–å…ƒæ•°æ® ============
    $table->string('origin_country', 2)->nullable()->comment('Country of origin (ISO 3166-1 alpha-2)');
    $table->string('hs_code')->nullable()->comment('Harmonized System code for customs');
    
    // ============ åˆè§„æ€§ ============
    $table->boolean('requires_age_verification')->default(false)->comment('Age restricted product');
    $table->unsignedTinyInteger('minimum_age')->nullable()->comment('Minimum age requirement');
    
    // ============ ç»Ÿè®¡æ•°æ® ============
    $table->unsignedBigInteger('views_count')->default(0)->comment('Total views');
    $table->unsignedBigInteger('favorites_count')->default(0)->comment('Total favorites');
    $table->unsignedBigInteger('total_sales_count')->default(0)->comment('Total sales');
    $table->decimal('average_rating', 3, 2)->nullable()->comment('Average customer rating');
    $table->unsignedInteger('reviews_count')->default(0)->comment('Total reviews');
    
    // ============ æ—¶é—´æˆ³ï¼ˆUTCï¼‰============
    $table->timestamps();
    $table->softDeletes();
    
    // ============ ç‰ˆæœ¬æ§åˆ¶ ============
    $table->unsignedBigInteger('version')->default(0)->comment('Optimistic locking version');
    
    // ============ å®¡è®¡å­—æ®µ ============
    $table->string('created_by_type', 64)->nullable();
    $table->string('created_by_id', 64)->nullable();
    $table->string('updated_by_type', 64)->nullable();
    $table->string('updated_by_id', 64)->nullable();
    
    $table->comment('Products table (international standard)');
    
    // ============ ç´¢å¼• ============
    $table->index(['owner_type', 'owner_id'], 'idx_owner');
    $table->index(['status', 'published'], 'idx_status');
    $table->index(['category_id'], 'idx_category');
    $table->index(['brand_id'], 'idx_brand');
    $table->index(['handle'], 'idx_handle');
    $table->index(['published_at'], 'idx_published');
    $table->index(['created_at'], 'idx_created');
    $table->fulltext(['title', 'description'], 'idx_fulltext_search');
});
```

### 2.2 Product Variants è¡¨ï¼ˆå›½é™…åŒ–ç‰ˆæœ¬ï¼‰

```php
Schema::create('product_variants', function (Blueprint $table) {
    
    // ============ åŸºç¡€ä¿¡æ¯ ============
    $table->unsignedBigInteger('id')->primary()->comment('Variant ID');
    
    $table->string('market', 32)->default('default')->comment('Market identifier');
    $table->string('owner_type', 64)->comment('Owner polymorphic type');
    $table->string('owner_id', 64)->comment('Owner polymorphic ID');
    
    $table->unsignedBigInteger('product_id')->comment('Parent product ID');
    
    // ============ å˜ä½“æ ‡è¯† ============
    $table->string('title')->comment('Variant title (e.g., "Red / Large")');
    $table->string('sku')->unique()->comment('Stock Keeping Unit');
    $table->string('barcode')->nullable()->comment('Barcode (UPC, EAN, ISBN)');
    $table->string('barcode_type', 32)->nullable()->comment('Barcode type: UPC, EAN13, ISBN');
    
    // ============ é€‰é¡¹å€¼ï¼ˆShopifyé£æ ¼ï¼‰============
    $table->string('option1')->nullable()->comment('First option value (e.g., Color: Red)');
    $table->string('option2')->nullable()->comment('Second option value (e.g., Size: Large)');
    $table->string('option3')->nullable()->comment('Third option value');
    
    // ============ ä»·æ ¼ï¼ˆå¤šè´§å¸æ”¯æŒï¼‰============
    $table->string('currency', 3)->default('USD')->comment('Currency (ISO 4217)');
    $table->decimal('price', 12, 2)->comment('Selling price');
    $table->decimal('compare_at_price', 12, 2)->nullable()->comment('Original/MSRP price');
    $table->decimal('cost_price', 12, 2)->nullable()->comment('Cost per item');
    
    // ============ åº“å­˜ç®¡ç† ============
    $table->bigInteger('inventory_quantity')->default(0)->comment('Available inventory');
    $table->unsignedBigInteger('inventory_item_id')->nullable()->comment('Inventory item reference');
    $table->string('inventory_management', 32)->nullable()->comment('Inventory tracking service');
    $table->string('inventory_policy', 32)->default('deny')->comment('deny|continue when out of stock');
    
    // ============ ç‰©ç†å±æ€§ï¼ˆå›½é™…å•ä½ï¼‰============
    $table->decimal('weight', 10, 3)->nullable()->comment('Weight value');
    $table->string('weight_unit', 10)->default('kg')->comment('kg, g, lb, oz');
    
    $table->decimal('length', 8, 2)->nullable()->comment('Length in meters');
    $table->decimal('width', 8, 2)->nullable()->comment('Width in meters');
    $table->decimal('height', 8, 2)->nullable()->comment('Height in meters');
    $table->string('dimension_unit', 10)->default('m')->comment('m, cm, in, ft');
    
    $table->decimal('volume', 10, 4)->nullable()->comment('Volume in cubic meters');
    
    // ============ ç‰©æµå±æ€§ ============
    $table->boolean('requires_shipping')->default(true)->comment('Needs shipping');
    $table->boolean('taxable')->default(true)->comment('Subject to taxes');
    $table->string('tax_code')->nullable()->comment('Tax category code');
    
    // ============ åª’ä½“ ============
    $table->string('image')->nullable()->comment('Variant-specific image URL');
    $table->unsignedTinyInteger('position')->default(1)->comment('Display position');
    
    // ============ å¯ç”¨æ€§ ============
    $table->string('status', 32)->default('active')->comment('active, draft, archived');
    $table->timestamp('available_at')->nullable()->comment('Available from (UTC)');
    $table->timestamp('expires_at')->nullable()->comment('Available until (UTC)');
    
    // ============ å›½é™…åŒ–å±æ€§ ============
    $table->string('origin_country', 2)->nullable()->comment('Country of origin (ISO 3166-1)');
    $table->string('hs_code')->nullable()->comment('Harmonized System code');
    
    // ============ ä¾›åº”å•† ============
    $table->unsignedBigInteger('supplier_id')->nullable()->comment('Supplier ID');
    $table->string('supplier_sku')->nullable()->comment('Supplier SKU reference');
    
    // ============ ç»Ÿè®¡ ============
    $table->unsignedBigInteger('sales_count')->default(0)->comment('Total units sold');
    
    // ============ æ—¶é—´æˆ³ï¼ˆUTCï¼‰============
    $table->timestamps();
    $table->softDeletes();
    
    // ============ ç‰ˆæœ¬æ§åˆ¶ ============
    $table->unsignedBigInteger('version')->default(0)->comment('Optimistic locking');
    
    // ============ å®¡è®¡ ============
    $table->string('created_by_type', 64)->nullable();
    $table->string('created_by_id', 64)->nullable();
    $table->string('updated_by_type', 64)->nullable();
    $table->string('updated_by_id', 64)->nullable();
    
    $table->comment('Product variants table (international standard)');
    
    // ============ ç´¢å¼• ============
    $table->index(['product_id'], 'idx_product');
    $table->index(['sku'], 'idx_sku');
    $table->index(['barcode'], 'idx_barcode');
    $table->index(['inventory_quantity'], 'idx_inventory');
    $table->index(['status'], 'idx_status');
    $table->index(['owner_type', 'owner_id'], 'idx_owner');
    
    // ============ å¤–é”® ============
    $table->foreign('product_id')->references('id')->on('products')
        ->onDelete('cascade');
});
```

### 2.3 å¤šè¯­è¨€ç¿»è¯‘è¡¨

```php
Schema::create('product_translations', function (Blueprint $table) {
    $table->id();
    $table->unsignedBigInteger('product_id')->comment('Product ID');
    $table->string('locale', 10)->comment('Language code (ISO 639-1 + region)'); // en-US, zh-CN, fr-FR
    
    // ç¿»è¯‘å­—æ®µ
    $table->string('title')->comment('Translated title');
    $table->text('description')->nullable()->comment('Translated description');
    $table->string('meta_title')->nullable()->comment('Translated SEO title');
    $table->text('meta_description')->nullable()->comment('Translated SEO description');
    $table->json('meta_keywords')->nullable()->comment('Translated keywords');
    
    $table->timestamps();
    
    $table->unique(['product_id', 'locale'], 'idx_product_locale');
    $table->index(['locale'], 'idx_locale');
    
    $table->foreign('product_id')->references('id')->on('products')
        ->onDelete('cascade');
    
    $table->comment('Product translations for internationalization');
});

Schema::create('variant_translations', function (Blueprint $table) {
    $table->id();
    $table->unsignedBigInteger('variant_id')->comment('Variant ID');
    $table->string('locale', 10)->comment('Language code');
    
    $table->string('title')->nullable()->comment('Translated variant title');
    $table->string('option1')->nullable()->comment('Translated option 1 value');
    $table->string('option2')->nullable()->comment('Translated option 2 value');
    $table->string('option3')->nullable()->comment('Translated option 3 value');
    
    $table->timestamps();
    
    $table->unique(['variant_id', 'locale'], 'idx_variant_locale');
    
    $table->foreign('variant_id')->references('id')->on('product_variants')
        ->onDelete('cascade');
        
    $table->comment('Variant translations');
});
```

### 2.4 å¤šè´§å¸ä»·æ ¼è¡¨

```php
Schema::create('variant_prices', function (Blueprint $table) {
    $table->id();
    $table->unsignedBigInteger('variant_id')->comment('Variant ID');
    $table->string('currency', 3)->comment('Currency code (ISO 4217)');
    $table->string('market', 32)->nullable()->comment('Specific market (optional)');
    
    $table->decimal('price', 12, 2)->comment('Price in this currency');
    $table->decimal('compare_at_price', 12, 2)->nullable()->comment('Compare price');
    
    $table->timestamp('effective_from')->nullable()->comment('Price effective from (UTC)');
    $table->timestamp('effective_until')->nullable()->comment('Price effective until (UTC)');
    
    $table->timestamps();
    
    $table->unique(['variant_id', 'currency', 'market'], 'idx_variant_currency_market');
    $table->index(['currency'], 'idx_currency');
    
    $table->foreign('variant_id')->references('id')->on('product_variants')
        ->onDelete('cascade');
        
    $table->comment('Multi-currency pricing for variants');
});
```

### 2.5 é€‰é¡¹å®šä¹‰è¡¨ï¼ˆShopifyé£æ ¼ï¼‰

```php
Schema::create('product_options', function (Blueprint $table) {
    $table->id();
    $table->unsignedBigInteger('product_id')->comment('Product ID');
    $table->string('name')->comment('Option name (e.g., Color, Size)');
    $table->unsignedTinyInteger('position')->default(1)->comment('Display order');
    $table->json('values')->comment('Available values array');
    
    $table->timestamps();
    
    $table->index(['product_id'], 'idx_product');
    
    $table->foreign('product_id')->references('id')->on('products')
        ->onDelete('cascade');
        
    $table->comment('Product variant options configuration');
});

Schema::create('product_option_translations', function (Blueprint $table) {
    $table->id();
    $table->unsignedBigInteger('option_id')->comment('Option ID');
    $table->string('locale', 10)->comment('Language code');
    
    $table->string('name')->comment('Translated option name');
    $table->json('values')->comment('Translated values array');
    
    $table->timestamps();
    
    $table->unique(['option_id', 'locale'], 'idx_option_locale');
    
    $table->foreign('option_id')->references('id')->on('product_options')
        ->onDelete('cascade');
        
    $table->comment('Product option translations');
});
```

## ä¸‰ã€å…³é”®å­—æ®µå¯¹æ¯”

### 3.1 æœ¯è¯­å›½é™…åŒ–å¯¹æ¯”

| ä¸­æ–‡æœ¯è¯­ | å½“å‰å‘½å | å›½é™…åŒ–å‘½å | å›½é™…å¹³å°ä½¿ç”¨ |
|---------|---------|-----------|------------|
| å•†å“ | Product | Product âœ… | é€šç”¨ |
| è§„æ ¼/SKU | ProductSku | ProductVariant | Shopify, BigCommerce |
| æ ‡é¢˜ | title | title âœ… | é€šç”¨ |
| å‰¯æ ‡é¢˜ | slogan | subtitle/tagline | WooCommerce |
| å”¯ä¸€æ ‡è¯† | - | handle | Shopify |
| å“ç‰Œ | brand | vendor | Shopify |
| ç±»å‹ | product_type | product_type âœ… | Shopify |
| çŠ¶æ€ | status | status âœ… | é€šç”¨ |
| å·²å‘å¸ƒ | - | published | Shopify |
| åº“å­˜ | stock | inventory_quantity | Shopify |
| å¸‚åœºä»· | market_price | compare_at_price | Shopify |
| æˆæœ¬ä»· | cost_price | cost_price âœ… | é€šç”¨ |
| é‡é‡ | weight | weight âœ… | é€šç”¨ |
| æ¡ç  | barcode | barcode âœ… | é€šç”¨ |
| åˆ†ç»„ | product_group | collection | Shopify |
| æ ‡ç­¾ | - | tags | Shopify |

### 3.2 æ–°å¢çš„å›½é™…åŒ–å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | é‡è¦æ€§ |
|-----|------|------|--------|
| `handle` | string | URLå‹å¥½çš„å”¯ä¸€æ ‡è¯† | ğŸ”´ é«˜ |
| `published` | boolean | æ˜¯å¦å·²å‘å¸ƒ | ğŸ”´ é«˜ |
| `published_at` | timestamp | å‘å¸ƒæ—¶é—´(UTC) | ğŸ”´ é«˜ |
| `locale` | string | è¯­è¨€ä»£ç  | ğŸ”´ é«˜ |
| `weight_unit` | string | é‡é‡å•ä½ | ğŸ”´ é«˜ |
| `dimension_unit` | string | å°ºå¯¸å•ä½ | ğŸ”´ é«˜ |
| `meta_title` | string | SEOæ ‡é¢˜ | ğŸŸ¡ ä¸­ |
| `meta_description` | text | SEOæè¿° | ğŸŸ¡ ä¸­ |
| `origin_country` | string(2) | åŸäº§å›½ä»£ç  | ğŸŸ¡ ä¸­ |
| `hs_code` | string | æµ·å…³ç¼–ç  | ğŸŸ¡ ä¸­ |
| `taxable` | boolean | æ˜¯å¦å¾ç¨ | ğŸ”´ é«˜ |
| `tax_code` | string | ç¨æ”¶åˆ†ç±»ä»£ç  | ğŸŸ¡ ä¸­ |
| `requires_shipping` | boolean | æ˜¯å¦éœ€è¦ç‰©æµ | ğŸ”´ é«˜ |
| `inventory_policy` | string | åº“å­˜ç­–ç•¥ | ğŸ”´ é«˜ |
| `barcode_type` | string | æ¡ç ç±»å‹ | ğŸŸ¢ ä½ |

## å››ã€æ ‡å‡†åŒ–è§„èŒƒ

### 4.1 è´§å¸ä»£ç ï¼ˆISO 4217ï¼‰

```php
// ä½¿ç”¨3ä½æ ‡å‡†è´§å¸ä»£ç 
'USD' - ç¾å…ƒ
'EUR' - æ¬§å…ƒ
'GBP' - è‹±é•‘
'JPY' - æ—¥å…ƒ
'CNY' - äººæ°‘å¸
'AUD' - æ¾³å…ƒ
'CAD' - åŠ æ‹¿å¤§å…ƒ
```

### 4.2 è¯­è¨€/åœ°åŒºä»£ç 

```php
// ä½¿ç”¨ language-REGION æ ¼å¼
'en-US' - ç¾å¼è‹±è¯­
'en-GB' - è‹±å¼è‹±è¯­
'zh-CN' - ç®€ä½“ä¸­æ–‡
'zh-TW' - ç¹ä½“ä¸­æ–‡
'fr-FR' - æ³•è¯­ï¼ˆæ³•å›½ï¼‰
'de-DE' - å¾·è¯­ï¼ˆå¾·å›½ï¼‰
'ja-JP' - æ—¥è¯­
'ko-KR' - éŸ©è¯­
```

### 4.3 å›½å®¶ä»£ç ï¼ˆISO 3166-1 alpha-2ï¼‰

```php
// ä½¿ç”¨2ä½å›½å®¶ä»£ç 
'US' - ç¾å›½
'CN' - ä¸­å›½
'GB' - è‹±å›½
'FR' - æ³•å›½
'DE' - å¾·å›½
'JP' - æ—¥æœ¬
```

### 4.4 é‡é‡å•ä½

```php
'kg'  - åƒå…‹ï¼ˆSIæ ‡å‡†ï¼Œæ¨èï¼‰
'g'   - å…‹
'lb'  - ç£…
'oz'  - ç›å¸
```

### 4.5 å°ºå¯¸å•ä½

```php
'm'   - ç±³ï¼ˆSIæ ‡å‡†ï¼Œæ¨èï¼‰
'cm'  - å˜ç±³
'in'  - è‹±å¯¸
'ft'  - è‹±å°º
```

## äº”ã€è¿ç§»å»ºè®®

### é˜¶æ®µ1ï¼šå­—æ®µé‡å‘½åå’Œæ·»åŠ 

```sql
-- æ·»åŠ å›½é™…åŒ–å¿…é¡»å­—æ®µ
ALTER TABLE products
ADD COLUMN handle VARCHAR(255) UNIQUE COMMENT 'URL-friendly identifier',
ADD COLUMN published BOOLEAN DEFAULT FALSE COMMENT 'Is published',
ADD COLUMN published_at TIMESTAMP NULL COMMENT 'Published at (UTC)',
ADD COLUMN weight_unit VARCHAR(10) DEFAULT 'kg' COMMENT 'Weight unit',
ADD COLUMN meta_title VARCHAR(255) NULL COMMENT 'SEO title',
ADD COLUMN meta_description TEXT NULL COMMENT 'SEO description',
ADD COLUMN taxable BOOLEAN DEFAULT TRUE COMMENT 'Subject to taxes',
ADD COLUMN requires_shipping BOOLEAN DEFAULT TRUE COMMENT 'Needs shipping',
ADD COLUMN origin_country CHAR(2) NULL COMMENT 'Country of origin';

ALTER TABLE product_skus
ADD COLUMN weight_unit VARCHAR(10) DEFAULT 'kg' COMMENT 'Weight unit',
ADD COLUMN dimension_unit VARCHAR(10) DEFAULT 'm' COMMENT 'Dimension unit',
ADD COLUMN barcode_type VARCHAR(32) NULL COMMENT 'Barcode type',
ADD COLUMN inventory_policy VARCHAR(32) DEFAULT 'deny' COMMENT 'Out of stock policy',
ADD COLUMN taxable BOOLEAN DEFAULT TRUE COMMENT 'Subject to taxes';
```

### é˜¶æ®µ2ï¼šåˆ›å»ºå›½é™…åŒ–æ”¯æŒè¡¨

```sql
-- åˆ›å»ºç¿»è¯‘è¡¨
CREATE TABLE product_translations (...);
CREATE TABLE variant_translations (...);
CREATE TABLE variant_prices (...);
CREATE TABLE product_options (...);
CREATE TABLE product_option_translations (...);
```

### é˜¶æ®µ3ï¼šæ•°æ®è¿ç§»

```php
// ç”Ÿæˆhandleï¼ˆURLå‹å¥½æ ‡è¯†ï¼‰
Product::chunk(100, function ($products) {
    foreach ($products as $product) {
        $handle = Str::slug($product->title);
        $counter = 1;
        
        while (Product::where('handle', $handle)->exists()) {
            $handle = Str::slug($product->title) . '-' . $counter++;
        }
        
        $product->update(['handle' => $handle]);
    }
});

// è¿ç§»å•ä½æ•°æ®
ProductSku::chunk(100, function ($skus) {
    foreach ($skus as $sku) {
        $sku->update([
            'weight_unit' => 'kg',
            'dimension_unit' => 'm'
        ]);
    }
});
```

## å…­ã€API å“åº”æ ¼å¼ï¼ˆå›½é™…åŒ–ï¼‰

### 6.1 Product API Response

```json
{
  "id": 1234567890,
  "handle": "cotton-t-shirt-classic",
  "title": "Classic Cotton T-Shirt",
  "description": "Comfortable 100% cotton t-shirt",
  "vendor": "Nike",
  "product_type": "Apparel > T-Shirts",
  "status": "active",
  "published": true,
  "published_at": "2025-01-01T00:00:00Z",
  
  "tags": ["summer", "casual", "cotton"],
  "collections": ["summer-collection", "bestsellers"],
  
  "has_variants": true,
  "options": [
    {
      "name": "Color",
      "position": 1,
      "values": ["Red", "Blue", "Green"]
    },
    {
      "name": "Size",
      "position": 2,
      "values": ["S", "M", "L", "XL"]
    }
  ],
  
  "variants": [
    {
      "id": 9876543210,
      "title": "Red / M",
      "sku": "CT-RED-M-001",
      "barcode": "1234567890123",
      "barcode_type": "EAN13",
      
      "option1": "Red",
      "option2": "M",
      "option3": null,
      
      "price": {
        "amount": "29.99",
        "currency": "USD"
      },
      "compare_at_price": {
        "amount": "39.99",
        "currency": "USD"
      },
      
      "inventory_quantity": 100,
      "inventory_policy": "deny",
      
      "weight": 0.3,
      "weight_unit": "kg",
      "dimensions": {
        "length": 0.7,
        "width": 0.5,
        "height": 0.01,
        "unit": "m"
      },
      
      "requires_shipping": true,
      "taxable": true,
      
      "image": {
        "src": "https://cdn.example.com/red-m.jpg",
        "alt": "Red T-Shirt Medium Size"
      }
    }
  ],
  
  "images": [
    {
      "src": "https://cdn.example.com/main.jpg",
      "alt": "Product main image",
      "position": 1
    }
  ],
  
  "seo": {
    "title": "Buy Classic Cotton T-Shirt | Best Price",
    "description": "Shop our classic cotton t-shirt. Free shipping on orders over $50."
  },
  
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-15T10:30:00Z"
}
```

### 6.2 å¤šè¯­è¨€å“åº”

```json
{
  "id": 1234567890,
  "handle": "cotton-t-shirt-classic",
  
  "translations": {
    "en-US": {
      "title": "Classic Cotton T-Shirt",
      "description": "Comfortable 100% cotton t-shirt"
    },
    "zh-CN": {
      "title": "ç»å…¸çº¯æ£‰Tæ¤",
      "description": "èˆ’é€‚çš„100%çº¯æ£‰Tæ¤"
    },
    "fr-FR": {
      "title": "T-shirt en coton classique",
      "description": "T-shirt confortable 100% coton"
    }
  }
}
```

## ä¸ƒã€æ€»ç»“

### å…³é”®æ”¹è¿›ç‚¹

1. âœ… **æœ¯è¯­æ ‡å‡†åŒ–**ï¼šä½¿ç”¨variantæ›¿ä»£skuï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
2. âœ… **å¤šè¯­è¨€æ”¯æŒ**ï¼šç‹¬ç«‹çš„ç¿»è¯‘è¡¨ç»“æ„
3. âœ… **å¤šè´§å¸å®šä»·**ï¼šæ”¯æŒä¸åŒå¸‚åœºä¸åŒä»·æ ¼
4. âœ… **å•ä½æ ‡å‡†åŒ–**ï¼šæ˜ç¡®çš„å•ä½å­—æ®µï¼Œä½¿ç”¨å›½é™…æ ‡å‡†
5. âœ… **SEOä¼˜åŒ–**ï¼šä¸“é—¨çš„å…ƒæ•°æ®å­—æ®µ
6. âœ… **æ—¶åŒºæ— å…³**ï¼šæ‰€æœ‰æ—¶é—´ä½¿ç”¨UTCå­˜å‚¨
7. âœ… **å›½é™…ç¨åŠ¡**ï¼šç¨åŠ¡ç›¸å…³å­—æ®µæ”¯æŒ
8. âœ… **URLå‹å¥½**ï¼šhandleå­—æ®µç”¨äºSEOå‹å¥½çš„URL
9. âœ… **åº“å­˜ç­–ç•¥**ï¼šå›½é™…é€šç”¨çš„åº“å­˜ç®¡ç†
10. âœ… **åˆè§„æ€§**ï¼šåŸäº§å›½ã€HSç¼–ç ç­‰å›½é™…è´¸æ˜“å­—æ®µ

### ä¼˜å…ˆçº§å»ºè®®

**ğŸ”´ ç«‹å³å®æ–½ï¼š**
- æ·»åŠ  `handle` å­—æ®µ
- æ·»åŠ å•ä½å­—æ®µï¼ˆ`weight_unit`, `dimension_unit`ï¼‰
- ä¿®æ”¹ç‰©ç†å±æ€§ä¸º decimal ç±»å‹
- æ·»åŠ  `taxable`, `requires_shipping` å­—æ®µ

**ğŸŸ¡ è¿‘æœŸå®æ–½ï¼š**
- åˆ›å»ºç¿»è¯‘è¡¨
- æ·»åŠ SEOå­—æ®µ
- æ·»åŠ å›½é™…è´¸æ˜“å­—æ®µ

**ğŸŸ¢ é•¿æœŸè§„åˆ’ï¼š**
- å¤šè´§å¸ä»·æ ¼è¡¨
- é€‰é¡¹é…ç½®è¡¨
- å®Œæ•´çš„å›½é™…åŒ–API

