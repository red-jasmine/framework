---
title: 优惠券领域
description: 电商平台优惠券领域设计文档，负责优惠券的创建、发放、领取、使用等全生命周期管理
outline: deep
order: 1
lastUpdated: true
tags: [coupon, ecommerce, marketing]
author: Red Jasmine Team
---

# 优惠券领域

## 概述

优惠券领域是电商平台营销体系的核心组成部分，负责管理各种类型的优惠券及其全生命周期。该领域通过灵活的优惠策略和规则引擎，为平台、商家和用户提供多样化的营销工具，提升用户购买转化率和平台活跃度。

### 问题域

优惠券领域需要解决以下核心问题：

- **营销策略多样化**：支持多种优惠计算方式（满减、折扣、包邮等）和发放策略
- **规则复杂性**：处理复杂的优惠规则，包括门槛条件、使用限制、有效期等
- **成本控制**：精确控制优惠券的成本承担方
- **防刷机制**：防止恶意刷券和优惠券滥用
- **实时性要求**：优惠券验证和使用需要高并发和实时响应
- **数据一致性**：确保优惠券发放、领取、使用过程中的数据一致性

### 业务价值

优惠券领域为业务带来以下价值：

- **提升转化率**：通过精准的优惠策略提升用户购买意愿
- **用户留存**：通过新人券、VIP券等策略提升用户粘性
- **成本可控**：精确的成本控制机制
- **营销灵活**：支持多种营销场景和策略组合
- **数据分析**：提供详细的优惠券使用数据和分析

## 核心能力

### 优惠券管理
- **优惠券创建**：支持多种计算方式优惠券的创建和配置
- **规则引擎**：灵活的优惠规则配置和验证机制
- **成本管理**：精确的成本承担方设置和成本控制
- **发放控制**：支持批量发放、自动发放等多种发放方式

### 用户优惠券管理
- **领取管理**：控制用户优惠券的领取资格和数量限制
- **状态管理**：管理优惠券的可用、已使用、已过期等状态
- **使用记录**：详细记录优惠券的使用过程和结果

### 优惠计算引擎
- **多维度计算**：支持商品金额、邮费、订单金额、跨店结算等多种计算维度
- **阶梯优惠**：支持单一和阶梯式优惠计算
- **阈值控制**：支持优惠金额的最大阈值限制
- **实时验证**：高并发的优惠券验证和使用

### 营销策略支持
- **新人营销**：支持新人专属优惠券
- **VIP营销**：支持基于VIP等级的优惠券策略
- **场景营销**：支持节日、活动等特定场景的优惠券
- **精准营销**：支持基于用户行为的精准优惠券投放

## 领域参与角色

### 内部角色

- **优惠券管理员**：负责优惠券的创建、配置和管理
- **营销专员**：负责优惠券策略制定和效果分析
- **财务专员**：负责优惠券成本核算
- **技术开发**：负责优惠券系统的开发和维护
- **数据分析师**：负责优惠券使用数据的分析和优化建议
- **客服专员**：负责优惠券相关的用户咨询和问题处理

### 外部角色

- **平台运营**：制定平台级优惠券策略
- **商家**：创建和管理店铺优惠券
- **用户**：领取和使用优惠券
- **主播/KOL**：创建粉丝专属优惠券
- **第三方营销**：通过API接入优惠券系统

## 连接领域

### 上游领域

- **用户领域**：获取用户信息、VIP等级、新人标识等
- **商品领域**：获取商品信息、分类、价格等用于优惠计算
- **订单领域**：获取订单信息用于优惠券验证和使用
- **店铺领域**：获取店铺信息用于商家优惠券管理
- **支付领域**：处理优惠券抵扣后的支付流程

### 下游领域

- **营销领域**：提供优惠券数据用于营销效果分析
- **财务领域**：提供优惠券成本数据用于财务核算
- **通知领域**：发送优惠券相关的通知消息
- **统计领域**：提供优惠券使用统计数据

## 核心用例

### UC001：创建优惠券
**参与者**：优惠券管理员
**前置条件**：管理员已登录系统
**主流程**：
1. 管理员选择优惠计算方式（满减、折扣、包邮等）
2. 配置优惠券基本信息（名称、描述、有效期等）
3. 设置优惠规则（门槛金额、优惠金额、计算方式等）
4. 配置发放规则（发放数量、用户限制、领取资格等）
5. 设置成本承担方
6. 保存并发布优惠券
**后置条件**：优惠券创建成功，可以开始发放

### UC002：用户领取优惠券
**参与者**：用户
**前置条件**：用户已登录，优惠券可领取
**主流程**：
1. 用户浏览可领取的优惠券列表
2. 系统验证用户领取资格（新人、VIP等级等）
3. 检查优惠券剩余数量和用户领取限制
4. 用户确认领取优惠券
5. 系统创建用户优惠券记录
6. 更新优惠券发放统计
**后置条件**：用户成功领取优惠券，优惠券状态为可用

### UC003：使用优惠券
**参与者**：用户
**前置条件**：用户有可用优惠券，订单满足使用条件
**主流程**：
1. 用户在订单页面选择优惠券
2. 系统验证优惠券使用条件（商品、金额、时间等）
3. 计算优惠金额和最终支付金额
4. 用户确认使用优惠券
5. 系统更新优惠券状态为已使用
6. 创建优惠券使用记录
**后置条件**：优惠券使用成功，订单金额已优惠

### UC004：优惠券成本核算
**参与者**：财务专员
**前置条件**：优惠券使用记录已生成
**主流程**：
1. 系统收集优惠券使用数据
2. 根据成本承担方配置计算成本金额
3. 生成成本记录
4. 更新相关方的成本统计
5. 生成财务报表
**后置条件**：优惠券成本核算完成，财务数据已更新

## 统一语言表

| 英文名称 | 中文名称 | 说明 | 示例 |
|---------|---------|------|------|
| Coupon | 优惠券 | 平台或商家发放的优惠凭证 | 满100减10优惠券 |
| UserCoupon | 用户优惠券 | 用户领取的优惠券实例 | 张三的满100减10券 |
| CouponUsage | 优惠券使用记录 | 记录优惠券的使用过程 | 订单123使用优惠券记录 |
| DiscountType | 优惠计算方式 | 优惠的计算方式 | 固定金额、百分比折扣 |
| ThresholdType | 门槛类型 | 享受优惠的门槛条件 | 订单金额、商品金额 |
| CostBearer | 成本承担方 | 承担优惠券成本的主体 | 平台、商家、主播 |
| ValidityType | 有效期类型 | 优惠券有效期的计算方式 | 绝对时间、相对时间 |
| IssueStrategy | 发放策略 | 优惠券的发放方式 | 自动发放、手动发放 |
| UsageRule | 使用规则 | 优惠券使用的限制条件值对象 | 商品适用规则、分类排除规则 |
| CollectRule | 领取规则 | 优惠券领取的限制条件值对象 | 人群适用规则、VIP排除规则 |
| RuleItem | 规则项 | 规则的最小单元值对象 | 商品ID、分类ID、人群标识 |
| RuleObjectType | 规则对象类型 | 规则作用的对象类型 | 商品、分类、人群 |
| RuleType | 规则类型 | 规则的逻辑类型 | 适用、排除 |
| CouponStatus | 优惠券状态 | 优惠券的当前状态 | 草稿、发布、暂停、过期 |
| UserCouponStatus | 用户优惠券状态 | 用户优惠券的当前状态 | 可用、已使用、已过期 |

## 领域模型

```plantuml
<!--@include: ./model.puml-->
```

### 核心实体说明

**优惠券 (Coupon)**
- 优惠券的主体实体，包含优惠券的基本信息、规则配置和发放控制
- 支持多种优惠计算方式，通过优惠规则实现灵活配置
- 管理优惠券的生命周期，从创建到过期

**用户优惠券 (UserCoupon)**
- 用户领取的优惠券实例，关联用户和优惠券
- 管理用户优惠券的状态变化（可用、已使用、已过期）
- 记录用户优惠券的使用历史

**优惠券使用记录 (CouponUsage)**
- 详细记录优惠券的使用过程，包括使用时间、订单信息、优惠金额等
- 为成本核算和数据分析提供数据基础
- 支持优惠券使用的追溯和审计

**优惠规则 (DiscountRule)**
- 定义优惠券的计算逻辑和使用条件
- 支持固定金额、百分比折扣、阶梯优惠等多种计算方式
- 提供统一的优惠计算规则，便于扩展新的优惠类型

**使用规则 (UsageRule)**
- 值对象，封装优惠券的使用限制条件
- 支持商品、分类、人群等多种对象类型
- 通过规则项组合实现复杂的使用条件逻辑
- 存储在优惠券表的JSON字段中

**领取规则 (CollectRule)**
- 值对象，封装优惠券的领取限制条件
- 支持基于商品、分类、人群的领取资格控制
- 通过规则项组合实现复杂的领取资格逻辑
- 存储在优惠券表的JSON字段中

**规则项 (RuleItem)**
- 值对象，表示规则的最小单元
- 包含对象类型、规则类型和对象值
- 支持适用和排除两种规则类型

**成本承担方 (CostBearer)**
- 管理优惠券成本的承担方，支持平台、商家、主播等多种主体
- 每个优惠券只有一个成本承担方，简化成本管理
- 支持成本的统计和核算 